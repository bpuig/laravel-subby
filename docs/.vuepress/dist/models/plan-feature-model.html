<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plan Feature Model | Laravel Subby</title>
    <meta name="generator" content="VuePress 1.7.1">

    <meta name="description"
          content="Laravel Subby is a flexible plans and subscription management system for Laravel.">

    <link rel="preload" href="/test-pages/assets/css/0.styles.7244528d.css" as="style">
    <link rel="preload" href="/test-pages/assets/js/app.1423e747.js" as="script">
    <link rel="preload" href="/test-pages/assets/js/2.60fa026b.js" as="script">
    <link rel="preload" href="/test-pages/assets/js/12.aece5e34.js" as="script">
    <link rel="prefetch" href="/test-pages/assets/js/10.398dca2c.js">
    <link rel="prefetch" href="/test-pages/assets/js/11.7dc5de01.js">
    <link rel="prefetch" href="/test-pages/assets/js/13.042fe715.js">
    <link rel="prefetch" href="/test-pages/assets/js/14.6af1a665.js">
    <link rel="prefetch" href="/test-pages/assets/js/3.e48d6748.js">
    <link rel="prefetch" href="/test-pages/assets/js/4.09fd2c39.js">
    <link rel="prefetch" href="/test-pages/assets/js/5.42448316.js">
    <link rel="prefetch" href="/test-pages/assets/js/6.73c063ed.js">
    <link rel="prefetch" href="/test-pages/assets/js/7.4bbc3078.js">
    <link rel="prefetch" href="/test-pages/assets/js/8.d1c79864.js">
    <link rel="prefetch" href="/test-pages/assets/js/9.4834181b.js">
    <link rel="stylesheet" href="/test-pages/assets/css/0.styles.7244528d.css">
</head>
<body>
<div id="app" data-server-rendered="true">
    <div class="theme-container">
        <header class="navbar">
            <div class="sidebar-button">
                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"
                     class="icon">
                    <path fill="currentColor"
                          d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
                </svg>
            </div>
            <a href="/test-pages/" class="home-link router-link-active"><!----> <span
                class="site-name">Laravel Subby</span></a>
            <div class="links">
                <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="">
                    <!----></div>
                <nav class="nav-links can-hide">
                    <div class="nav-item"><a href="/test-pages/" class="nav-link">
                        Home
                    </a></div>
                    <a href="https://github.com/bpuig/laravel-subby" target="_blank" rel="noopener noreferrer"
                       class="repo-link">
                        GitHub
                        <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px"
                                   y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path
                            fill="currentColor"
                            d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon
                            fill="currentColor"
                            points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span
                            class="sr-only">(opens new window)</span></span></a></nav>
            </div>
        </header>
        <div class="sidebar-mask"></div>
        <aside class="sidebar">
            <nav class="nav-links">
                <div class="nav-item"><a href="/test-pages/" class="nav-link">
                    Home
                </a></div>
                <a href="https://github.com/bpuig/laravel-subby" target="_blank" rel="noopener noreferrer"
                   class="repo-link">
                    GitHub
                    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px"
                               viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path
                        fill="currentColor"
                        d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon
                        fill="currentColor"
                        points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span
                        class="sr-only">(opens new window)</span></span></a></nav>
            <ul class="sidebar-links">
                <li>
                    <section class="sidebar-group depth-0"><p class="sidebar-heading"><span>The package</span> <!---->
                    </p>
                        <ul class="sidebar-links sidebar-group-items">
                            <li><a href="/test-pages/" aria-current="page" class="sidebar-link">Introduction</a></li>
                            <li><a href="/test-pages/install/" class="sidebar-link">Installation</a></li>
                        </ul>
                    </section>
                </li>
                <li>
                    <section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Usage</span> <!---->
                    </p>
                        <ul class="sidebar-links sidebar-group-items">
                            <li><a href="/test-pages/models/" aria-current="page" class="sidebar-link">Models</a></li>
                            <li><a href="/test-pages/models/plan-model.html" class="sidebar-link">Plan Model</a></li>
                            <li><a href="/test-pages/models/plan-feature-model.html" aria-current="page"
                                   class="active sidebar-link">Plan Feature Model</a>
                                <ul class="sidebar-sub-headers">
                                    <li class="sidebar-sub-header"><a
                                        href="/test-pages/models/plan-feature-model.html#create-plan-features"
                                        class="sidebar-link">Create plan features</a></li>
                                    <li class="sidebar-sub-header"><a
                                        href="/test-pages/models/plan-feature-model.html#get-plan-feature-value"
                                        class="sidebar-link">Get Plan Feature value</a></li>
                                    <li class="sidebar-sub-header"><a
                                        href="/test-pages/models/plan-feature-model.html#feature-options"
                                        class="sidebar-link">Feature Options</a></li>
                                </ul>
                            </li>
                            <li><a href="/test-pages/models/plan-subscription-model.html" class="sidebar-link">Plan
                                Subscription Model</a></li>
                        </ul>
                    </section>
                </li>
            </ul>
        </aside>
        <main class="page">
            <div class="theme-default-content content__default"><h1 id="plan-feature-model"><a
                href="#plan-feature-model" class="header-anchor">#</a> Plan Feature Model</h1>
                <p>This model relates to which features has a Plan.</p>
                <h2 id="create-plan-features"><a href="#create-plan-features" class="header-anchor">#</a> Create plan
                    features</h2>
                <p>Features are things that you plan allows you to do. They can be resettable or a fixed value.</p>
                <div class="language-php extra-class"><pre class="language-php"><code><span
                    class="token keyword">use</span> <span class="token package">Bpuig<span
                    class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span
                    class="token punctuation">\</span>Plan</span><span class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> Plan<span
                        class="token punctuation">:</span><span class="token punctuation">:</span><span
                        class="token function">find</span><span class="token punctuation">(</span><span
                        class="token number">1</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>

<span class="token comment">// Create multiple plan features at once</span>
<span class="token variable">$plan</span><span class="token operator">-</span><span
                        class="token operator">&gt;</span><span class="token function">features</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token operator">-</span><span class="token operator">&gt;</span><span
                        class="token function">saveMany</span><span class="token punctuation">(</span><span
                        class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span
                        class="token punctuation">(</span><span class="token punctuation">[</span><span
                        class="token single-quoted-string string">'tag'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'social_profiles'</span><span
                        class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'Social profiles available'</span><span
                        class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'value'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">3</span><span class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'sort_order'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">1</span><span class="token punctuation">]</span><span
                        class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span
                        class="token punctuation">(</span><span class="token punctuation">[</span><span
                        class="token single-quoted-string string">'tag'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'posts_per_social_profile'</span><span
                        class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'Scheduled posts per profile'</span><span
                        class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'value'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">30</span><span class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'sort_order'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">10</span><span class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'resettable_period'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">1</span><span class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'resettable_interval'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'month'</span><span class="token punctuation">]</span><span
                        class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">PlanFeature</span><span
                        class="token punctuation">(</span><span class="token punctuation">[</span><span
                        class="token single-quoted-string string">'tag'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'analytics'</span><span
                        class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token single-quoted-string string">'Analytics'</span><span
                        class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'value'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token boolean constant">true</span><span class="token punctuation">,</span> <span
                        class="token single-quoted-string string">'sort_order'</span> <span
                        class="token operator">=</span><span class="token operator">&gt;</span> <span
                        class="token number">15</span><span class="token punctuation">]</span><span
                        class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
                <h2 id="get-plan-feature-value"><a href="#get-plan-feature-value" class="header-anchor">#</a> Get Plan
                    Feature value<a name="get-feature-value"></a></h2>
                <p>Say you want to show the value of the feature <em>posts_per_social_profile</em> from above. You can
                    do so in many ways:</p>
                <div class="language-php extra-class"><pre class="language-php"><code><span
                    class="token keyword">use</span> <span class="token package">Bpuig<span
                    class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span
                    class="token punctuation">\</span>Plan</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Bpuig<span
                        class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span
                        class="token punctuation">\</span>PlanFeature</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Bpuig<span
                        class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span
                        class="token punctuation">\</span>PlanSubscription</span><span
                        class="token punctuation">;</span>

<span class="token variable">$plan</span> <span class="token operator">=</span> Plan<span
                        class="token punctuation">:</span><span class="token punctuation">:</span><span
                        class="token function">find</span><span class="token punctuation">(</span><span
                        class="token number">1</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>

<span class="token comment">// Use the plan instance to get feature's value</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> <span class="token variable">$plan</span><span
                        class="token operator">-</span><span class="token operator">&gt;</span><span
                        class="token function">getFeatureByTag</span><span class="token punctuation">(</span><span
                        class="token single-quoted-string string">'posts_per_social_profile'</span><span
                        class="token punctuation">)</span><span class="token operator">-</span><span
                        class="token operator">&gt;</span><span class="token property">value</span><span
                        class="token punctuation">;</span>

<span class="token comment">// Query the feature itself directly</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> PlanFeature<span
                        class="token punctuation">:</span><span class="token punctuation">:</span><span
                        class="token function">where</span><span class="token punctuation">(</span><span
                        class="token single-quoted-string string">'tag'</span><span
                        class="token punctuation">,</span> <span class="token single-quoted-string string">'posts_per_social_profile'</span><span
                        class="token punctuation">)</span><span class="token operator">-</span><span
                        class="token operator">&gt;</span><span class="token function">first</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token operator">-</span><span class="token operator">&gt;</span><span
                        class="token property">value</span><span class="token punctuation">;</span>

<span class="token comment">// Get feature value through the subscription instance</span>
<span class="token variable">$amountOfPosts</span> <span class="token operator">=</span> PlanSubscription<span
                        class="token punctuation">:</span><span class="token punctuation">:</span><span
                        class="token function">find</span><span class="token punctuation">(</span><span
                        class="token number">1</span><span class="token punctuation">)</span><span
                        class="token operator">-</span><span class="token operator">&gt;</span><span
                        class="token function">getFeatureValue</span><span class="token punctuation">(</span><span
                        class="token single-quoted-string string">'posts_per_social_profile'</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
                <h2 id="feature-options"><a href="#feature-options" class="header-anchor">#</a> Feature Options<a
                    name="feature-options"></a></h2>
                <p>Plan features are great for fine-tuning subscriptions, you can top up certain feature for X times of
                    usage, so users may then use it only for that amount. Features also have the ability to be
                    resettable and then it's usage could be expired too. See the following examples:</p>
                <div class="language-php extra-class"><pre class="language-php"><code><span
                    class="token keyword">use</span> <span class="token package">Bpuig<span
                    class="token punctuation">\</span>Subby<span class="token punctuation">\</span>Models<span
                    class="token punctuation">\</span>PlanFeature</span><span class="token punctuation">;</span>

<span class="token comment">// Find plan feature</span>
<span class="token variable">$feature</span> <span class="token operator">=</span> PlanFeature<span
                        class="token punctuation">:</span><span class="token punctuation">:</span><span
                        class="token function">where</span><span class="token punctuation">(</span><span
                        class="token single-quoted-string string">'tag'</span><span
                        class="token punctuation">,</span> <span class="token single-quoted-string string">'posts_per_social_profile'</span><span
                        class="token punctuation">)</span><span class="token operator">-</span><span
                        class="token operator">&gt;</span><span class="token function">first</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>

<span class="token comment">// Get feature reset date</span>
<span class="token variable">$feature</span><span class="token operator">-</span><span
                        class="token operator">&gt;</span><span class="token function">getResetDate</span><span
                        class="token punctuation">(</span><span class="token keyword">new</span> <span
                        class="token class-name"><span class="token punctuation">\</span>Carbon<span
                        class="token punctuation">\</span>Carbon</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
</code></pre>
                </div>
            </div>
            <footer class="page-edit"><!----> <!----></footer>
            <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/test-pages/models/plan-model.html" class="prev">
        Plan Model
      </a></span> <span class="next"><a href="/test-pages/models/plan-subscription-model.html">
        Plan Subscription Model
      </a>
      →
    </span></p></div>
        </main>
    </div>
    <div class="global-ui"></div>
</div>
<script src="/test-pages/assets/js/app.1423e747.js" defer></script>
<script src="/test-pages/assets/js/2.60fa026b.js" defer></script>
<script src="/test-pages/assets/js/12.aece5e34.js" defer></script>
</body>
</html>
